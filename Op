private static async Task<bool> TryClickProceedUnsafeAsync(WebView2 web)
{
    const string js = @"
(() => {
  // WebView2/Chromium SSL interstitial에서 자주 보이는 메인 프레임 id
  // (환경 따라 다를 수 있어도 플래그는 안전하게 동작)
  const proceed = document.querySelector('#proceed-link');
  if (proceed) { proceed.click(); return 'proceeded'; }

  // details는 토글이므로 '한 번만' 누르게
  if (!window.__gateone_details_clicked) {
    const details = document.querySelector('#details-button');
    if (details) {
      window.__gateone_details_clicked = true;
      details.click();
      return 'details_clicked_once';
    }
  }

  return 'no_action';
})();";

    var raw = await web.CoreWebView2.ExecuteScriptAsync(js);

    // raw는 JSON string로 오기도 함: "\"proceeded\"" 이런 형태
    // 그냥 contains로 처리
    return raw.Contains("proceeded", StringComparison.OrdinalIgnoreCase)
        || raw.Contains("details_clicked_once", StringComparison.OrdinalIgnoreCase);
}
